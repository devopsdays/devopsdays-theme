{{ define "main" }}

    <div class="row">
        <div class="col-md-12">
          <div class="embed-responsive embed-responsive-16by9">
              <div id="map_canvas" class="embed-responsive-item"></div>
          </div>
        </div>
    </div>

    {{ $.Scratch.Add "i" 1 }}
    <div class="row">
        {{- range sort $.Site.Data.events "startdate" -}}
          {{- if .startdate -}}
            {{- if ge (dateFormat "2006-01-02" .startdate) (dateFormat "2006-01-02" ($.Now.Format "2006-01-02")) -}}
                <div class="col-md-3 homepage-grid-col">
                  <a href = "/events/{{ .name }}">
                    {{- if .homepage_image }}
                      {{- if ne .homepage_image "" }}
                        <img src = "/events/{{ .name }}/{{ .homepage_image }}" class="img-fluid"/>
                      {{- end -}}
                      {{- else -}}
                        <img src="/img/event-logo-default.png" class="img-fluid"/>
                    {{- end -}}
                  </a>
                    <br/>
                    <span class = "homepage-grid-date">
                      {{- dateFormat "Jan 2" .startdate -}}
                    &nbsp;-&nbsp;
                    {{-  dateFormat "Jan 2, 2006" .enddate -}}<br/>
                  </span>
                    <span class="homepage-grid-city">{{ .city }}</span>
                    <br/>
                    {{- if .description -}}
                        {{- if ne .description "" -}}
                            <span class="homepage-grid-desc">{{ .description | markdownify }}</span>
                        {{- end -}}
                    {{- end -}}
                </div>
                {{- if modBool ($.Scratch.Get "i") 4 -}}
                  </div>
                  <div class="row">
                {{- end -}}
                {{ $.Scratch.Add "i" 1 }}
            {{- end -}}
        {{- end -}}
        {{- end -}}
    </div>
{{- end -}}
